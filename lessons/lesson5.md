# 第5课 设计模式

## 设计模式的概念
设计模式指的是1994年出版的《设计模式》一书中总结的23种解决特定编程问题的经验、套路和法则，
但并非是必须遵守的规范。设计模式是编程领域数十年来智慧的结晶，是经历过无数次实战检验的行之有效的方法集，
其核心思想和目标是尽可能增强代码的复用性和适应性，减少代码修改的次数和范围，使代码更便于组织和维护。

设计模式是语言无关、技术无关的，它不是一种编程技术和技巧，而是解决问题的思维方法，不但可以用于解决编程问题，
也可以解决其他工程问题、架构问题甚至是生活中的问题。不过，设计模式主要服务的范畴还是面向对象编程，
因此应当先熟悉面向对象编程的各种概念。

## 面向对象编程的设计原则

### SOLID
* S - 单一职责原则
* O - 开放封闭原则
* L - 里氏替换原则
* I - 接口隔离原则
* D - 依赖倒置原则

### 迪米特法则
对依赖对象和实现细节知道的越少越好

### KISS原则
保持简单

### DRY原则
不要重复造轮子

## 常用的几种设计模式
设计模式其实早已潜移默化地被应用于日常的编程中，只是我们没有意识到而已。

### 单例模式

### 工厂模式
* 简单工厂模式
* 工厂方法模式
* 抽象工厂模式

### 代理模式

### 适配器模式

### 监听模式（观察者模式/订阅模式）

## 设计模式的运用
在实际工作中，通常是多个设计原则和设计模式同时使用的，但无需刻意地去遵循某些原则和模式，
应当根据实际情况来灵活调整。

总体来说，多利用抽象、封装、继承机制，实现代码的可扩展性和可复用性，这就是设计模式的体现。

### 案例：Deadline提交工具的设计
**需求：**

有多个不同的Nuke模板，用于渲染不同类型的文件，每个模板都有各自的逻辑函数，
最终都要提交到Deadline农场进行渲染。

**分析：**

不变项/共同项：

* 文件相关的扫描、解析、组织函数
* Nuke相关的操作函数
* Deadline提交相关的函数

可变项/扩展项：

* 模板文件
* 模板中用到的特定逻辑函数 —— 对应到界面上特定的控件（插件）
* 渲染配置

**组织：**

* core
    * file_utils
    * nuke_utils
    * deadline_utils
* base_classes
    * base_job
    * base_template
    * base_widget
* ui
    * main
    * custom_widget1
    * custom_widget2
    * custom_widget3
    * ui_config
* jobs
    * job1
    * job2
    * job3
* templates
    * template1
    * template2
    * template3
* config
    * global_config
    * config1
    * config2
    * config3